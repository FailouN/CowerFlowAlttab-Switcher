<Window x:Class="CoverflowAltTab.SwitcherWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SwitcherWindow"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        KeyDown="Window_KeyDown"
        KeyUp="Window_KeyUp"
        Loaded="Window_Loaded"
        Width="1920"
        Height="1080"
        ResizeMode="NoResize" 
        WindowState="Normal"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <!-- Glow подсветка -->
        <Rectangle x:Name="GlowOverlay"
                   Fill="White"
                   Opacity="0.08"
                   RadiusX="60"
                   RadiusY="60"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Margin="120"
                   IsHitTestVisible="False"
                   Panel.ZIndex="0">
            <Rectangle.Effect>
                <DropShadowEffect BlurRadius="550"
                                  ShadowDepth="0"
                                  Color="White"
                                  Opacity="1"/>
            </Rectangle.Effect>
        </Rectangle>

        <!-- Placeholder для центрального окна -->
        <Image x:Name="CenterPlaceholder"
               Width="0"
               Height="0"
               HorizontalAlignment="Center"
               VerticalAlignment="Center"
               Stretch="Uniform"
               Visibility="Collapsed"
               Panel.ZIndex="5"/>

        <!-- Основная сцена -->
        <Viewport3D x:Name="MainViewport"
                    ClipToBounds="True"
                    Panel.ZIndex="1">
            <Viewport3D.Camera>
                <PerspectiveCamera Position="0,0,1100"
                                   LookDirection="0,0,-1"
                                   FieldOfView="45"/>
            </Viewport3D.Camera>
            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <DirectionalLight Color="White" Direction="-1,-1,-3"/>
                </ModelVisual3D.Content>
            </ModelVisual3D>
        </Viewport3D>

        <!-- Подпись активного окна в рамочке -->
        <StackPanel Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Bottom"
                    Margin="0,0,0,150"
                    Panel.ZIndex="2">
            <Border BorderBrush="#CC808080"
                    BorderThickness="2"
                    CornerRadius="5"
                    Padding="5"
                    Background="#CC808080">
                  <Border.Effect>
                <DropShadowEffect BlurRadius="200"
                                  ShadowDepth="0"
                                  Color="White"
                                  Opacity="1"/>
            </Border.Effect>
                <StackPanel Orientation="Horizontal">
                    <Image x:Name="OverlayIcon"
                           Width="28"
                           Height="28"
                           Margin="0,0,6,0"/>
                    <TextBlock x:Name="OverlayTitle"
                               FontSize="18"
                               Foreground="Black"
                               VerticalAlignment="Center"/>

                    <Button Content="X"
                    Width="20"
                    Height="20"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Right"
                    Margin="10,0,0,0"
                    Background="Transparent"
                    BorderBrush="Transparent"
                    Foreground="White"
                    FontSize="12"
                    FontWeight="Bold"
                    Click="CloseButton_Click"/>

                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>
</Window>
